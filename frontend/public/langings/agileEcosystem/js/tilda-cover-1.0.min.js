function triggerCoverBgForYoutube(coverTimer,el,height){return coverTimer&&window.clearTimeout(coverTimer),coverTimer=window.setTimeout(function(){var windowScrollTop,windowHeight,elHeight,elTopPos;el.querySelector("iframe")||(windowScrollTop=window.pageYOffset,windowHeight=window.innerHeight,elHeight=t_cover__getHeightWithoutPadding(el),(elTopPos=el.getBoundingClientRect().top+windowScrollTop)-500<windowScrollTop+windowHeight&&windowScrollTop<=elTopPos+elHeight+500&&cover_onFuncLoad(window.processYoutubeVideo,function(){window.processYoutubeVideo(el,height)}))},100)}function cover_fixcontentheight(id,isOrientationChange){var height,el=document.querySelector("#rec"+id),id=el.querySelector(".t-cover"),id=id?t_cover__getHeightWithoutPadding(id):0,content=el.querySelector("div[data-hook-content]"),contentHeight=content?t_cover__getHeightWithoutPadding(content):0;"935"!==el.getAttribute("data-record-type")&&(300<contentHeight&&id<contentHeight+40?(cover_setRecalculatedCoverHeight(el,contentHeight),window.isMobile||setTimeout(function(){var divVideo=el.querySelector(".t-cover__carrier");divVideo&&divVideo.querySelector("iframe")&&(console.log("correct video from cover_fixcontentheight"),window.setWidthAndHeightVideo(divVideo,contentHeight+"px","youtube")),divVideo.querySelector("video")&&console.log("correct html5video from cover_fixcontentheight")},2e3),cover_updateResizeElem(el)):window.isMobile&&isOrientationChange?(cover_setRecalculatedCoverHeight(el,contentHeight),cover_updateResizeElem(el)):!window.isMobile||(content=el.querySelector(".t-cover__carrier"))&&"100vh"===content.getAttribute("data-content-cover-height")&&(height=window.innerHeight,Array.prototype.forEach.call([".t-cover",".t-cover__filter",".t-cover__carrier",".t-cover__wrapper"],function(selector){el.querySelector(selector)&&(el.querySelector(selector).style.height=height+"px")})))}function cover_setRecalculatedCoverHeight(el,hcontent){var coverCarrier=el.querySelector(".t-cover__carrier"),coverCarrier=coverCarrier?coverCarrier.getAttribute("data-content-cover-height"):"0",height=document.documentElement.clientHeight,height=-1!==coverCarrier.indexOf("vh")?Math.round(parseInt(coverCarrier,10)/100*height):parseInt(coverCarrier,10),coverCarrier=window.innerWidth<=568?40:120,hcontentMargin=window.innerWidth<=568?50:100;1e3<(hcontent+=coverCarrier)&&(hcontent+=hcontentMargin),height=height<hcontent?hcontent:height,console.log("auto correct cover height: "+height);Array.prototype.forEach.call([".t-cover",".t-cover__filter",".t-cover__carrier",".t-cover__wrapper"],function(selector){el.querySelector(selector)&&(el.querySelector(selector).style.height=height+"px")})}function cover_updateResizeElem(el){if("function"==typeof window.t_lazyload_updateResize_elem)try{window.t_lazyload_updateResize_elem(el.querySelector(".t-cover__carrier"))}catch(e){console.log("error:"+e)}}function cover_checkIsFixForBackgroundNeeded(id){var youtubeUrl,mp4Url,webmUrl,is_safari,rec=document.body.querySelector("#rec"+id);if(rec)return rec=rec.querySelector(".t-cover__carrier"),null!==rec&&(youtubeUrl=rec.getAttribute("data-content-video-url-youtube"),mp4Url=rec.getAttribute("data-content-video-url-mp4"),webmUrl=rec.getAttribute("data-content-video-url-webm")),is_safari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),!(window.isMobile||/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document)&&is_safari&&!youtubeUrl&&!mp4Url&&!webmUrl&&rec&&"fixed"===rec.getAttribute("data-content-cover-parallax")&&!window["cover"+id+"fixbackgroundstyles"]}function cover_fixBackgroundFixedNode(id){var rec,head,style,css,parent;cover_checkIsFixForBackgroundNeeded(id)&&(rec=document.body.querySelector("#rec"+id),parent=document.body.querySelector("#rec"+id+" .t-cover").parentNode,console.log("new fix node background-position: fixed"),window.cover_fixBackgroundStyles||(css=".t-cover__container {position: relative;}.t-cover__container .t-cover {clip: rect(0, auto, auto, 0);position: absolute;top: 0;left: 0;width: 100%;height: 100% !important;}.t-cover__container .t-cover .t-cover__carrier {position: fixed;display: block;top: 0;left: 0;width: 100%;height: 100%!important;background-size: cover;background-position: center center;transform: translateZ(0);will-change: transform;}",head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style"),head.appendChild(style),style.type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),window.cover_fixBackgroundStyles=!0),(head=document.createElement("div")).classList.add("t-cover__container"),parent.insertAdjacentElement("afterbegin",head),style=rec.querySelector(".t-cover"),head.style.height=t_cover__getHeightWithoutPadding(style)+"px",head.appendChild(style),void 0!==(css={275:".t256__video-container",286:".t266__video-container",337:".t-container",906:".t906__video-container"}[rec.getAttribute("data-record-type")])&&(parent=rec.querySelector(css),head.appendChild(parent)),window["cover"+id+"fixbackgroundnodes"]=!0)}function cover_fixBackgroundFixedStyles(id){var newWrapper,coverHeight,rec=document.body.querySelector("#rec"+id);cover_checkIsFixForBackgroundNeeded(id)&&(console.log("new fix style background-position: fixed"),null!==(newWrapper=rec.querySelector(".t-cover__container"))&&(coverHeight=(rec=rec.querySelector(".t-cover")).style.height,rec.style.height=0,null!==newWrapper.style&&(newWrapper.style.height=coverHeight),window["cover"+id+"fixbackgroundstyles"]=!0))}function cover_onFuncLoad(funcName,okFunc){"function"==typeof funcName?okFunc():setTimeout(function checkFuncExist(){if("function"!=typeof funcName){if("complete"===document.readyState&&"function"!=typeof funcName)throw new Error(funcName+" is undefined");setTimeout(checkFuncExist,100)}else okFunc()})}function t_cover__getHeightWithoutPadding(el){var elPaddingTop=parseInt(el.style.paddingTop)||0,elPaddingBottom=parseInt(el.style.paddingBottom)||0;return el.clientHeight-(elPaddingTop+elPaddingBottom)}function t_cover__scrollToNextSection(to,duration){var perTick;duration<=0||(perTick=(to-window.pageYOffset)/duration*10,setTimeout(function(){window.scrollTo(0,window.pageYOffset+perTick),document.body.setAttribute("data-scrollable","true"),window.pageYOffset!==to?t_cover__scrollToNextSection(to,duration-10):document.body.removeAttribute("data-scrollable")},10))}!function(){var windowHeight=window.innerHeight;window.addEventListener("resize",function(){windowHeight=window.innerHeight}),window.parallax=function(el,speedFactor,outerHeight){var isWebkitTransform=!!document.body.style.webkitTransform;function update(){var position=window.pageYOffset,top=el.getBoundingClientRect().top+position,rectTop=el.getBoundingClientRect().top;top+("undefined"!=typeof height?height:0)<position||position+windowHeight<top||(position=-1*Math.round(rectTop*speedFactor),isWebkitTransform?el.style.webkitTransform="translateY("+position+"px)":el.style.top=position+"px")}isWebkitTransform&&(el.style.position="relative"),(arguments.length<1||null===speedFactor)&&(speedFactor=.1),update(),window.addEventListener("scroll",update),window.addEventListener("resize",update),"complete"!==document.readyState&&window.addEventListener("load",function(){update()})}}(),function(){function t_cover__startInitingCover(){var records=document.querySelector(".t-records");"edit"!==(records?records.getAttribute("data-tilda-mode"):"")&&(records=document.querySelectorAll(".t-cover__carrier"),Array.prototype.forEach.call(records,function(coverCarrier){coverCarrier=coverCarrier.getAttribute("data-content-cover-id");0<coverCarrier&&cover_init(coverCarrier)}))}window.cover_init=function(id){function t_cover__initCover(){var el=document.body.querySelector("#coverCarry"+id),backgroundURL=el.getAttribute("data-content-cover-bg")||"",height=el.getAttribute("data-content-cover-height")||"",parallax=el.getAttribute("data-content-cover-parallax")||"",videoMP4=el.getAttribute("data-content-video-url-mp4")||"",videoWEBM=el.getAttribute("data-content-video-url-webm")||"",youtubeID=el.getAttribute("data-content-video-url-youtube")||"",noLoop=el.getAttribute("data-content-video-noloop")||"",noMute=el.getAttribute("data-content-video-nomute")||"",bgBase64=el.getAttribute("data-content-bg-base64")||"",videoNoCover=el.getAttribute("data-content-video-nocover")||"";videoNoCover&&"yes"===videoNoCover&&(youtubeID=videoWEBM=videoMP4=""),!window.isMobile||""===videoWEBM&&""===videoMP4&&""===youtubeID||(el.style.backgroundImage='url("'+backgroundURL+'")'),setTimeout(function(){cover_fixcontentheight(id,!1),cover_fixBackgroundFixedStyles(id)},500),cover_fixBackgroundFixedNode(id);var coverTimer,flagprocessed,loop,muted,heightMoreVh,parentHeight,bg_already,img,videoNoCover=document.getElementById("rec"+id).querySelector("img[data-hook-clogo]"),rec=(videoNoCover&&(videoNoCover.onload=function(){setTimeout(function(){cover_fixcontentheight(id,!1),cover_fixBackgroundFixedStyles(id)},500)}),window.isMobile&&window.addEventListener("orientationchange",function(){window.addEventListener("resize",function(){cover_fixcontentheight(id,!0),cover_fixBackgroundFixedStyles(id)})}),""===videoMP4&&""===videoWEBM&&""===youtubeID||window.isMobile||(flagprocessed=!1,""!==youtubeID||""===videoMP4&&""===videoWEBM?""!==youtubeID&&(el.style.backgroundColor="#000000",el.style.backgroundImage="",el.setAttribute("data-content-cover-bg",""),window.addEventListener("scroll",function(){coverTimer=triggerCoverBgForYoutube(coverTimer,el,height)}),coverTimer=triggerCoverBgForYoutube(coverTimer,el,height)):(el.style.backgroundColor="#000000",el.style.backgroundImage='url("https://tilda.ws/img/spinner-white.gif")',el.style.backgroundSize="auto",el.setAttribute("data-content-cover-bg",""),loop=!1,loop=""===noLoop,muted=!0,muted=""===noMute,heightMoreVh=!1,"fixed"===parallax&&(-1!==height.indexOf("vh")&&100<parseInt(height)&&(el.style.height="100vh",heightMoreVh=!0),-1!==height.indexOf("px")&&parseInt(height)>window.innerHeight&&(el.style.height="100vh",heightMoreVh=!0)),window.addEventListener("scroll",function(){var windowScrollTop,windowHeight,parentHeight,currentElementParent=el.parentElement;coverTimer&&window.clearTimeout(coverTimer),coverTimer=window.setTimeout(function(){var windowScrollTop,windowHeight,elHeight,elTopPos;flagprocessed||(windowScrollTop=window.pageYOffset,windowHeight=window.innerHeight,elHeight=t_cover__getHeightWithoutPadding(el),(elTopPos=el.getBoundingClientRect().top+windowScrollTop)-500<windowScrollTop+windowHeight&&windowScrollTop<=elTopPos+elHeight+500&&cover_onFuncLoad(window.videoBG,function(){var vid=window.videoBG(el,{mp4:videoMP4,webm:videoWEBM,poster:"",preload:"none",autoplay:"true",loop:loop,volume:1,scale:!0,zIndex:0,width:"100%"});vid.setAttribute("muted",muted),vid.setAttribute("playsinline",""),videoLoadProcessor.registerNewVideo(vid),flagprocessed=!0}))},100),"fixed"===parallax&&heightMoreVh&&(windowScrollTop=window.pageYOffset,windowHeight=window.innerHeight,parentHeight=t_cover__getHeightWithoutPadding(currentElementParent),(currentElementParent=currentElementParent.getBoundingClientRect().top+windowScrollTop)+parentHeight-windowHeight<=windowScrollTop?(el.style.position="absolute",el.style.bottom="0px",el.style.top="auto"):currentElementParent<=windowScrollTop?(el.style.position="fixed",el.style.top="0px"):windowScrollTop<currentElementParent&&(el.style.position="relative",el.style.top="auto"))}),videoNoCover=el.parentElement,coverTimer&&window.clearTimeout(coverTimer),coverTimer=window.setTimeout(function(){var windowScrollTop,windowHeight,elHeight,elTopPos;flagprocessed||(windowScrollTop=window.pageYOffset,windowHeight=window.innerHeight,elHeight=t_cover__getHeightWithoutPadding(el),(elTopPos=el.getBoundingClientRect().top+windowScrollTop)-500<windowScrollTop+windowHeight&&windowScrollTop<=elTopPos+elHeight+500&&cover_onFuncLoad(window.videoBG,function(){var vid=window.videoBG(el,{mp4:videoMP4,webm:videoWEBM,poster:"",preload:"none",autoplay:"true",loop:loop,volume:1,scale:!0,zIndex:0,width:"100%"});vid.setAttribute("muted",muted),vid.setAttribute("playsinline",""),videoLoadProcessor.registerNewVideo(vid),flagprocessed=!0}))},100),"fixed"===parallax&&heightMoreVh&&(noLoop=window.pageYOffset,noMute=window.innerHeight,parentHeight=t_cover__getHeightWithoutPadding(videoNoCover),(videoNoCover=videoNoCover.getBoundingClientRect().top+noLoop)+parentHeight-noMute<=noLoop?(el.style.position="absolute",el.style.bottom="0px",el.style.top="auto"):videoNoCover<=noLoop?(el.style.position="fixed",el.style.top="0px"):noLoop<videoNoCover&&(el.style.position="relative",el.style.top="auto")))),"dynamic"===parallax&&(window.isMobile||(parentHeight=window.innerHeight,(noMute=t_cover__getHeightWithoutPadding(el))<window.innerHeight&&(el.style.height=noMute+.2*parentHeight+"px"),window.parallax(el,.2,!0))),"yes"===bgBase64&&""!==backgroundURL&&""===videoMP4&&""===videoWEBM&&""===youtubeID&&(bg_already="",(img=document.createElement("img")).src=backgroundURL,img.onload=function(){img.parentNode&&img.parentNode.removeChild(img),el.style.backgroundImage='url("'+backgroundURL+'")',el.style.opacity="1",bg_already="yes"},"yes"!==bg_already&&(el.style.backgroundImage="",el.style.opacity="0",el.style.transition="opacity 25ms")),document.getElementById("rec"+id)),noLoop=rec?rec.querySelector(".t-cover__arrow-wrapper"):null;noLoop&&noLoop.addEventListener("click",function(){var recHeight=rec.offsetHeight;0<recHeight&&t_cover__scrollToNextSection(rec.getBoundingClientRect().top+window.pageYOffset+recHeight,300)}),(el.hasAttribute("data-content-video-url-youtube")||el.hasAttribute("data-content-video-url-mp4")||el.hasAttribute("data-content-video-url-webm"))&&window.addEventListener("resize",t_throttle(function(){var elHeight;el.querySelector(".videoBG")&&(elHeight=t_cover__getHeightWithoutPadding(el),window.setWidthAndHeightVideo(el.querySelector(".videoBG"),elHeight+"px","html5")),el.querySelector("iframe")&&(elHeight=el.getAttribute("data-content-cover-height"),window.setWidthAndHeightVideo(el,elHeight,"youtube"))}))}"loading"!==document.readyState?t_cover__initCover():document.addEventListener("DOMContentLoaded",t_cover__initCover)},"loading"!==document.readyState?t_cover__startInitingCover():document.addEventListener("DOMContentLoaded",t_cover__startInitingCover)}();
